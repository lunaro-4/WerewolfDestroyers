[gd_scene load_steps=16 format=3 uid="uid://dpvqt7nfeb7ek"]

[ext_resource type="Script" path="res://Scripts/controlable_player_character.gd" id="1_tye0m"]
[ext_resource type="PackedScene" uid="uid://cj6bda8y1k831" path="res://CustomComponents/health_component.tscn" id="2_enhey"]
[ext_resource type="PackedScene" uid="uid://cuad5o64p42de" path="res://CustomComponents/hurt_box_component.tscn" id="3_1kge4"]
[ext_resource type="PackedScene" uid="uid://d0u057ptfmdxl" path="res://CustomComponents/attack_component.tscn" id="4_dj6m5"]
[ext_resource type="PackedScene" uid="uid://laivrmt2olyg" path="res://CustomComponents/hit_box_component.tscn" id="5_pae3j"]
[ext_resource type="Script" path="res://Scripts/player_attack_polygon_animation.gd" id="6_43k2b"]
[ext_resource type="Script" path="res://Scripts/player_attack_1_animation.gd" id="7_fujc5"]
[ext_resource type="Texture2D" uid="uid://cudjykfkea80j" path="res://icon.svg" id="8_1f2xd"]
[ext_resource type="PackedScene" uid="uid://cg5holg485hji" path="res://CustomComponents/regeneration_component.tscn" id="11_o6uf2"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_inrhm"]
size = Vector2(128, 130)

[sub_resource type="CircleShape2D" id="CircleShape2D_wrykn"]
radius = 100.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_oihk3"]
radius = 16.0
height = 76.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_nibrw"]
radius = 21.0
height = 118.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_aueyh"]
size = Vector2(112, 112)

[sub_resource type="SpriteFrames" id="SpriteFrames_7bgio"]

[node name="ControlablePlayerCharacter" type="CharacterBody2D"]
collision_layer = 5
collision_mask = 4
script = ExtResource("1_tye0m")

[node name="HealthComponent" parent="." instance=ExtResource("2_enhey")]
max_health = 100

[node name="HurtBoxComponent" parent="." node_paths=PackedStringArray("health_component") instance=ExtResource("3_1kge4")]
collision_layer = 1
collision_mask = 1
health_component = NodePath("../HealthComponent")

[node name="HurtBoxShape" type="CollisionShape2D" parent="HurtBoxComponent"]
scale = Vector2(0.4, 0.4)
shape = SubResource("RectangleShape2D_inrhm")

[node name="Attacks" type="Node2D" parent="."]

[node name="Attack1Component" parent="Attacks" node_paths=PackedStringArray("hitbox") instance=ExtResource("4_dj6m5")]
hit_window = 0.2
hitbox = NodePath("../HitBox1Component")

[node name="HitBox1Component" parent="Attacks" node_paths=PackedStringArray("attack_component", "hit_animation_object") instance=ExtResource("5_pae3j")]
collision_layer = 2
collision_mask = 0
damage = 200.0
attack_component = NodePath("../Attack1Component")
hit_animation_object = NodePath("Attack1Polygon")
knockback = 10.0
ray_coursor = true

[node name="HitBox1Shape1" type="CollisionShape2D" parent="Attacks/HitBox1Component"]
position = Vector2(38, 0)
scale = Vector2(0.4, 0.4)
shape = SubResource("CircleShape2D_wrykn")
disabled = true

[node name="HitBox1Shape2" type="CollisionShape2D" parent="Attacks/HitBox1Component"]
position = Vector2(69, 0)
shape = SubResource("CapsuleShape2D_oihk3")
disabled = true

[node name="HitBox1Shape3" type="CollisionShape2D" parent="Attacks/HitBox1Component"]
position = Vector2(47, 0)
shape = SubResource("CapsuleShape2D_nibrw")
disabled = true

[node name="Attack1Polygon" type="Polygon2D" parent="Attacks/HitBox1Component"]
color = Color(1, 1, 1, 0)
polygon = PackedVector2Array(-2, 0, 43, -58, 57, -55, 65, -49, 69, -41, 77, -33, 82, -25, 85, -17, 86, -9, 89, -2, 88, 9, 85, 17, 80, 26, 74, 35, 68, 43, 62, 52, 48, 59)
script = ExtResource("6_43k2b")

[node name="Attack1Animation" type="Node2D" parent="Attacks/HitBox1Component"]
script = ExtResource("7_fujc5")

[node name="CollisionShape" type="CollisionShape2D" parent="."]
scale = Vector2(0.4, 0.4)
shape = SubResource("RectangleShape2D_aueyh")

[node name="Sprite2D" type="Sprite2D" parent="."]
visible = false
scale = Vector2(0.4, 0.4)
texture = ExtResource("8_1f2xd")

[node name="Timer" type="Timer" parent="."]
autostart = true

[node name="RegenerationComponent" parent="." node_paths=PackedStringArray("health_component") instance=ExtResource("11_o6uf2")]
health_component = NodePath("../HealthComponent")

[node name="MainSprite" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_7bgio")

[connection signal="hp_changed" from="HealthComponent" to="HealthComponent" method="_on_hp_changed"]
[connection signal="on_death" from="HealthComponent" to="." method="_on_death"]
[connection signal="on_health_decrease" from="HealthComponent" to="." method="_on_health_component_on_health_decrease"]
[connection signal="attack_finished" from="Attacks/Attack1Component" to="." method="_on_attack_1_component_attack_finished"]
